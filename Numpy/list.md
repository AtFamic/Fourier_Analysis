#リストオブジェクト

リスト型は文字列と同じくシーケンス型の一つです。複数の要素から構成され、要素が順に並んでいるものになります。

    組み込み型
      + 数値型
      |  + 整数
      |  + 長整数
      |  + 浮動小数点
      |  + 複素数
      + シーケンス型
      |  + 文字列
      |  + ユニコード文字列
      |  + リスト
      |  + タプル
      + マップ型
      |  + 辞書(ディクショナリ)
      + ファイルオブジェクト
文字列は要素として文字を持つものでしたが、リストは要素としてあらゆるオブジェクトを持つことが出来ます。その為、他の複数のオブジェクトをまとめて管理することが出来るオブジェクトであると言えます。

リスト型のオブジェクトを作成するには次のように行います。

    [オブジェクト1, オブジェクト2, ...]
括弧[]で囲んだ中にオブジェクトをカンマ(,)で区切って記述します。

具体的には次のように記述します。

    [2005, 2006, 2007, 2008]
上記ではリストの要素は全て数値オブジェクトとなっています。

また作成されたリストオブジェクトもオブジェクトの一つですので、変数に代入することが出来ます。

    list = [2005, 2006, 2007, 2008]
リストの要素は異なるオブジェクトであっても構いません。下記では数値オブジェクトと文字列オブジェクトが混在するリストオブジェクトを作成しています。

    list = [u"山田", u"太郎", 1992, 12, 31, u"男性"]
他のリストオブジェクトを要素として持つことも可能です。

    list = [10, [20, 16], [32, 34], 18]
なお、変数がオブジェクトをコピーして格納しるわけではなく、オブジェクトへの参照を持っているだけだったのと同じように、リストの各要素もオブジェクトのコピーを持っているわけではなく各オブジェクトへの参照を持っているだけです。

#要素とインデックス

文字列やリストなどのシーケンス型は、要素が順序を持って並べられています。

    list = [2005, 2006, 2007, 2008]
このリストは「2005」「2006」「2007」「2008」と言うには4つの要素を持っています。そして要素は順序を持っていますので、「2005」の要素の次の要素は「2006」ですし、「2006」の要素の次は「2007」となります。

文字列の場合と同じく要素にはインデックスが割り当てられており、先頭の要素から「0」「1」「2」...と0から順に番号が割り当てられています。この番号を使うことで要素を指定することが出来ます。(なおインデックスには負の値を指定することも可能です。負の値の場合は「-1」なら一番最後の要素、「-2」なら最後から二番目の要素となります)。

リストオブジェクトの中でインデックスを指定して要素を取得するには次の書式を使います。

    リストオブジェクト[インデックス]
引数に指定したインデックスを持つ要素を取り出します。インデックスは0から始まることに注意して下さい。

具体的には次のように記述します。

    list = [2005, 2006, 2007, 2008]
    year = list[0]
上記では、インデックス「0」の要素を取得して変数に代入しています。インデックス「0」の要素とはリストの先頭の要素ですので変数「year」には「2005」が代入されます。

#スライスを使った部分リストの取得

リストでも文字列と同じくスライスを使うことが出来ます。スライスの基本的な使い方については「スライスを使った部分文字列の取得」を参照して下さい。

リストオブジェクトに対しスライスを使って部分リストを取得するには次の書式を使います。

    リストオブジェクト[開始インデックス:終了インデックス]
具体的には次のように記述します。

    list = ["A", "B", "C", "D", "E"]
    
    slice1 = list[1:2]     # ["B"]
    slice2 = list[1:-1]    # ["B", "C", "D"]
    slice3 = list[1:]      # ["B", "C", "D", "E"]
    slice4 = list[:2]      # ["A", "B"]
    slice5 = list[:]       # ["A", "B", "C", "D", "E"]
スライスを使って取得したオブジェクトもリストオブジェクトです。例えばスライスによって取得した要素の数が1つであっても、要素数が1つのリストオブジェクトとなりますので注意して下さい。要素が参照しているオブジェクトを取得したい場合は、インデックスを指定して要素を取得する必要があります。

#スライスを使った部分文字列の取得

文字列やリストなどのシーケンス型のオブジェクトではスライスという機能を使用できます。これはオブジェクトの中の指定した範囲の要素を持つ新しいオブジェクトを作成して返してくれるものです。

スライスではどこからどこまでの要素を抽出するのかを指定する必要がります。例として「ABCDE」と言う文字列を使ってスライスの説明を行います。

     0   1   2   3   4   5
     | A | B | C | D | E |
文字列が「ABCDE」だった場合、インデックス0は最初の文字「A」の前、インデックス1は最初の文字「A」と次の文字「B」の間となります。そして抽出する文字の先頭の文字の前のインデックスから最後の文字の次のインデックスで指定します。例えば「BC」を取得する場合には、「B」の前のインデックス1から「C」の次のインデックス3を指定します。指定方法は次の通りです。

    文字列オブジェクト[開始インデックス:終了インデックス]
開始インデックスと終了インデックスをコロン(:)でつなげて指定します。具体的には次のように記述します。

    str = "ABCDE"
    slice = str[1:3]    # "BC"
インデックスの指定方法には注意して下さい。

またインデックスにはマイナスの値も指定できます。インデックスと位置の関係は次の通りです。

            -3  -2  -1
     | A | B | C | D | E |
マイナスの値を使用する場合は、最後の文字の次のインデックスを指定できませんので、最後の文字は抽出できません。具体的には次のように記述します。

    str = "ABCDE"
    slice = str[1:-1]    # "BCD"
終了インデックスを省略すると最後の文字の次のインデックスが指定されたことになります。結果的に開始インデックスから最後の文字までが抽出されます。

    文字列オブジェクト[開始インデックス:]
具体的には次のように記述します。

    str = "ABCDE"
    slice = str[1:]    # "BCDE"
開始インデックスを省略すると最初の文字の前のインデックスが指定されたことになります。結果的に先頭の文字から終了インデックスの前の文字までが抽出されます。

    文字列オブジェクト[:終了インデックス]
具体的には次のように記述します。

    str = "ABCDE"
    slice = str[:2]    # "AB"
開始インデックスと終了インデックスを省略すると先頭の文字から最後の文字までが抽出されます。

    文字列オブジェクト[:]
具体的には次のように記述します。

    str = "ABCDE"
    slice = str[:]    # "ABCDE"
このようにスライスを使うことで、対象のオブジェクトの中から一部分を抽出した新しいオブジェクトを作成することが可能となります。

#要素の変更

リストオブジェクトは一度作成された後で要素が参照するオブジェクトを変更することが出来ます。(文字列の場合は、個々の要素が参照する文字を変更できません)。

要素が参照するオブジェクトを変更するには、インデックスを指定して取得した要素に対して新しいオブジェクトを代入します。

    リスト[インデックス] = オブジェクト
この時、新しいリストオブジェクトが作成されるのではなく、元のリストオブジェクトの指定の要素が参照するオブジェクトが変更になります。

具体的には次のように記述します。

    list = ["A", "B", "C"]
    
    list[1] = "b"
    print list      # ["A", "b", "C"]
指定したインデックスの要素が参照するオブジェクトが文字列「B」から文字列「b」に変更になります。

またスライスを使って取得したリストに対して新しいリストを代入することで、リストの一部分を別のリストに置き換えることが出来ます。

    リスト[開始インデックス:終了インデックス] = 別のリスト
具体的には次のように記述します。

    list = ["A", "B", "C", "D"]
    
    list[1:3] = ["b", "c"]
    print list      # ["A", "b", "c", "D"]
スライスによって取得した部分リストを別のリストによって置き換えています。

また今回は置き換えられるリストの要素数と置き換えるリストの要素数は同じでしたが、必ずしも同じである必要はありません。次の例を見てください。

    list = ["A", "B", "C", "D"]
    
    list[1:3] = ["B", "b", "C", "c"]
    print list      # ["A", "B", "b", "C", "c", "D"]
上記では対象のリストの2つの要素に対して、4つの新しい要素を持つリストを代入しています。結果的に2つの要素を4つの要素で置き換えることになりますのでリストは6つの要素を持つオブジェクトになります。

スライスを使う場合も、新しいリストオブジェクトが作成されるのではなく、元のリストオブジェクトが変更されていることに注意して下さい。